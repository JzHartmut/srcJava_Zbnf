apply plugin: 'java'
                                                                
version='3.0.1'



//sourceSets {
//  external {
//    java {
//      srcDir "$projectDir/."
//      include "xxxsrc/mainxxx/java/org/vishia/checkDeps_C/CheckDeps.java"
//    }
//  }
//  main {                                             
//    java {
//      compileClasspath += external.classes
//    }                                                             
//  }                                                  
//}
//



dependencies {
  implementation files('libs/junit-platform-console-standalone-1.6.0.jar')
}



sourceSets {
    main {
         java {
            srcDirs = ['src/main/java']
            //java = 'org/vishia/checkDeps_C/CheckDeps.java'
         }                                       
    }

    test {
        java {
            srcDirs = ['src/test/java']
        }
    }
}

                              

                                               
jar {                                                
  //source('org.vishia.checkDeps_C.CheckDeps.java')
  manifest {                                                 
      attributes 'Main-Class': 'org.vishia.jztxtcmd.JZtxtcmd'
   }
}


task copyJar(type:Exec) {
  dependsOn jar
  commandLine 'cmd', '/c', 'copy', 'build\\libs\\vishiaBase-'+version+'.jar', '..\\jars'
  commandLine 'cmd', '/c', 'copy', 'build\\libs\\vishiaBase-'+version+'.jar', '..\\jars\\vishiaBase.jar'
}

test {                                                                                                 
  dependsOn copyJar
  testLogging.showStandardStreams = true
  useJUnitPlatform {
    includeTags 'teststd'
    includeTags 'simple'
  }
}




// sourceSets {
//  main {
//    java {
//      exclude 'org.vishia.*'
//      'org.vishia.checkDeps_C.CheckDeps.java'             
//    }                                                      
//  }                                                                
//}
//

//copies the sources to one jar file, named PROJECT-sources.jar
//task sourcesJar(type: Jar, dependsOn: classes) {
//    classifier = 'sources'
//    from sourceSets.main.allSource
//}

//task javadocJar(type: Jar, dependsOn: javadoc) {
//    classifier = 'javadoc'
////    from javadoc.destinationDir
//}

//artifacts {
//    archives sourcesJar
//    archives javadocJar
//}

